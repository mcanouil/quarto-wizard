---
title: "Validation"
---

## Schema Definition Validation

Pure validation logic for \_schema.yml / \_schema.json files.

Validates syntax, structure, and semantic correctness of extension schema
definition files. Returns an array of findings with severity levels.

### Interfaces

- [SchemaDefinitionFinding](validation.qmd#symbol-interface-schemadefinitionfinding)

### Type Aliases

- [SchemaDefinitionSeverity](validation.qmd#symbol-typealias-schemadefinitionseverity)

### Functions

- [validateSchemaDefinition](validation.qmd#symbol-function-validateschemadefinition)
- [validateSchemaDefinitionStructure](validation.qmd#symbol-function-validateschemadefinitionstructure)
- [validateSchemaDefinitionSyntax](validation.qmd#symbol-function-validateschemadefinitionsyntax)

## Schema-Derived Constants

Derives validation constants and completion metadata from the

JSON Schema meta-schema (extension-schema.json).

All derivation runs once at module load time.

### Variables

- [ALLOWED_FIELD_PROPERTIES](validation.qmd#symbol-variable-allowed-field-properties)
- [ALLOWED_SHORTCODE_KEYS](validation.qmd#symbol-variable-allowed-shortcode-keys)
- [ALLOWED_TOP_LEVEL_KEYS](validation.qmd#symbol-variable-allowed-top-level-keys)
- [ALLOWED_TYPES](validation.qmd#symbol-variable-allowed-types)
- [fieldDescriptorMetadata](validation.qmd#symbol-variable-fielddescriptormetadata)
- [rootKeyMetadata](validation.qmd#symbol-variable-rootkeymetadata)
- [SCHEMA_META_SCHEMA](validation.qmd#symbol-variable-schema-meta-schema)
- [shortcodeEntryMetadata](validation.qmd#symbol-variable-shortcodeentrymetadata)

## validateSchemaDefinition {#symbol-function-validateschemadefinition}

```{.ts filename="TypeScript"}
function validateSchemaDefinition(content, format): SchemaDefinitionFinding[];
```

Defined in: [packages/schema/src/validation/schema-definition.ts:57](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L57)

Validate a schema definition file and return all findings.

### Parameters

| Parameter | Type                 | Description                             |
| --------- | -------------------- | --------------------------------------- |
| `content` | `string`             | Raw file content (YAML or JSON string). |
| `format`  | `"json"` \| `"yaml"` | File format: "yaml" or "json".          |

### Returns

`<code><a href="validation.qmd#symbol-interface-schemadefinitionfinding" style="text-decoration-line: underline; text-decoration-style: dashed; text-decoration-thickness: 1px; text-decoration-color: currentColor;">SchemaDefinitionFinding</a>[]</code>`{=html}

Array of validation findings.

## validateSchemaDefinitionStructure {#symbol-function-validateschemadefinitionstructure}

```{.ts filename="TypeScript"}
function validateSchemaDefinitionStructure(parsed): SchemaDefinitionFinding[];
```

Defined in: [packages/schema/src/validation/schema-definition.ts:113](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L113)

Validate the structure and semantics of a parsed schema definition.

### Parameters

| Parameter | Type      | Description                  |
| --------- | --------- | ---------------------------- |
| `parsed`  | `unknown` | The parsed YAML/JSON object. |

### Returns

`<code><a href="validation.qmd#symbol-interface-schemadefinitionfinding" style="text-decoration-line: underline; text-decoration-style: dashed; text-decoration-thickness: 1px; text-decoration-color: currentColor;">SchemaDefinitionFinding</a>[]</code>`{=html}

Array of validation findings.

## validateSchemaDefinitionSyntax {#symbol-function-validateschemadefinitionsyntax}

```{.ts filename="TypeScript"}
function validateSchemaDefinitionSyntax(content, format):
  | {
  error: SchemaDefinitionFinding[];
}
  | {
  error: null;
  parsed: unknown;
};
```

Defined in: [packages/schema/src/validation/schema-definition.ts:72](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L72)

Validate syntax of a schema definition file.

### Parameters

| Parameter | Type                 | Description       |
| --------- | -------------------- | ----------------- |
| `content` | `string`             | Raw file content. |
| `format`  | `"json"` \| `"yaml"` | File format.      |

### Returns

\| \{
`error`: `<code><a href="validation.qmd#symbol-interface-schemadefinitionfinding" style="text-decoration-line: underline; text-decoration-style: dashed; text-decoration-thickness: 1px; text-decoration-color: currentColor;">SchemaDefinitionFinding</a>[]</code>`{=html};
\}
\| \{
`error`: `null`;
`parsed`: `unknown`;
\}

Either an error array or the parsed object.

## SchemaDefinitionFinding {#symbol-interface-schemadefinitionfinding}

Defined in: [packages/schema/src/validation/schema-definition.ts:27](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L27)

A single validation finding from schema definition analysis.

### Properties

| Property                                  | Type                                                                                   | Description                                                   | Defined in                                                                                                                                                                                                |
| ----------------------------------------- | -------------------------------------------------------------------------------------- | ------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="property-code"></a> `code`         | `string`                                                                               | Machine-readable code identifying the check.                  | [packages/schema/src/validation/schema-definition.ts:33](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L33) |
| <a id="property-column"></a> `column?`    | `number`                                                                               | Zero-based column number (when available from syntax errors). | [packages/schema/src/validation/schema-definition.ts:37](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L37) |
| <a id="property-keypath"></a> `keyPath?`  | `string`                                                                               | Dot-separated key path to the problematic location.           | [packages/schema/src/validation/schema-definition.ts:39](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L39) |
| <a id="property-line"></a> `line?`        | `number`                                                                               | Zero-based line number (when available from syntax errors).   | [packages/schema/src/validation/schema-definition.ts:35](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L35) |
| <a id="property-message"></a> `message`   | `string`                                                                               | Human-readable description of the issue.                      | [packages/schema/src/validation/schema-definition.ts:29](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L29) |
| <a id="property-severity"></a> `severity` | [`SchemaDefinitionSeverity`](validation.qmd#symbol-typealias-schemadefinitionseverity) | Severity level.                                               | [packages/schema/src/validation/schema-definition.ts:31](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L31) |

## SchemaDefinitionSeverity {#symbol-typealias-schemadefinitionseverity}

```{.ts filename="TypeScript"}
type SchemaDefinitionSeverity = "error" | "warning" | "information";
```

Defined in: [packages/schema/src/validation/schema-definition.ts:22](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-definition.ts#L22)

Severity level for a schema definition finding.

## ALLOWED_FIELD_PROPERTIES {#symbol-variable-allowed-field-properties}

```{.ts filename="TypeScript"}
const ALLOWED_FIELD_PROPERTIES: Set<string>;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:50](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L50)

Allowed properties on a field descriptor (both camelCase and kebab-case).

## ALLOWED_SHORTCODE_KEYS {#symbol-variable-allowed-shortcode-keys}

```{.ts filename="TypeScript"}
const ALLOWED_SHORTCODE_KEYS: Set<string>;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:56](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L56)

Allowed top-level keys inside a shortcode entry.

## ALLOWED_TOP_LEVEL_KEYS {#symbol-variable-allowed-top-level-keys}

```{.ts filename="TypeScript"}
const ALLOWED_TOP_LEVEL_KEYS: Set<string>;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:47](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L47)

Allowed top-level keys in a schema definition file.

## ALLOWED_TYPES {#symbol-variable-allowed-types}

```{.ts filename="TypeScript"}
const ALLOWED_TYPES: Set<string>;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:53](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L53)

Allowed type values for a field descriptor.

## fieldDescriptorMetadata {#symbol-variable-fielddescriptormetadata}

```{.ts filename="TypeScript"}
const fieldDescriptorMetadata: object;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:121](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L121)

### Type Declaration

#### booleanProperties {#symbol-variable-fielddescriptormetadata-booleanproperties}

```{.ts filename="TypeScript"}
booleanProperties: Set<string>;
```

#### nestedProperties {#symbol-variable-fielddescriptormetadata-nestedproperties}

```{.ts filename="TypeScript"}
nestedProperties: Set<string>;
```

#### propertyDocs {#symbol-variable-fielddescriptormetadata-propertydocs}

```{.ts filename="TypeScript"}
propertyDocs: Record<string, string>;
```

#### shortcodeArgumentOnly {#symbol-variable-fielddescriptormetadata-shortcodeargumentonly}

```{.ts filename="TypeScript"}
shortcodeArgumentOnly: Set<string>;
```

#### snippetOverrides {#symbol-variable-fielddescriptormetadata-snippetoverrides}

```{.ts filename="TypeScript"}
snippetOverrides: Record<string, string>;
```

#### valueTriggerProperties {#symbol-variable-fielddescriptormetadata-valuetriggerproperties}

```{.ts filename="TypeScript"}
valueTriggerProperties: Set<string>;
```

#### yamlHidden {#symbol-variable-fielddescriptormetadata-yamlhidden}

```{.ts filename="TypeScript"}
yamlHidden: Set<string>;
```

## rootKeyMetadata {#symbol-variable-rootkeymetadata}

```{.ts filename="TypeScript"}
const rootKeyMetadata: object;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:173](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L173)

### Type Declaration

#### propertyDocs {#symbol-variable-rootkeymetadata-propertydocs}

```{.ts filename="TypeScript"}
propertyDocs: Record<string, string>;
```

#### yamlHidden {#symbol-variable-rootkeymetadata-yamlhidden}

```{.ts filename="TypeScript"}
yamlHidden: Set<string>;
```

## SCHEMA_META_SCHEMA {#symbol-variable-schema-meta-schema}

```{.ts filename="TypeScript"}
const SCHEMA_META_SCHEMA: Record<string, unknown> = metaSchema;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:40](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L40)

## shortcodeEntryMetadata {#symbol-variable-shortcodeentrymetadata}

```{.ts filename="TypeScript"}
const shortcodeEntryMetadata: object;
```

Defined in: [packages/schema/src/validation/schema-derived.ts:149](https://github.com/mcanouil/quarto-wizard/blob/fc7e2189e9911e712439991c71b70ef60c9acd06/packages/schema/src/validation/schema-derived.ts#L149)

### Type Declaration

#### nestedProperties {#symbol-variable-shortcodeentrymetadata-nestedproperties}

```{.ts filename="TypeScript"}
nestedProperties: Set<string>;
```

#### propertyDocs {#symbol-variable-shortcodeentrymetadata-propertydocs}

```{.ts filename="TypeScript"}
propertyDocs: Record<string, string>;
```

#### snippetOverrides {#symbol-variable-shortcodeentrymetadata-snippetoverrides}

```{.ts filename="TypeScript"}
snippetOverrides: Record<string, string>;
```
