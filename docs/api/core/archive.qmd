---
title: "Archive"
---

## Archive Extraction Module

Unified archive extraction for ZIP and TAR.GZ formats.

Provides format detection, extraction, and cleanup utilities for archive files.

### Interfaces

#### DiscoveredExtension

Defined in: [packages/core/src/archive/extract.ts:140](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L140)

Information about a discovered extension in an archive.

##### Properties

| Property                                 | Type               | Description                                                                 | Defined in                                                                                                                                                                    |
| ---------------------------------------- | ------------------ | --------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="id"></a> `id`                     | `object`           | Extension ID derived from directory structure.                              | [packages/core/src/archive/extract.ts:146](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L146) |
| `id.name`                                | `string`           | -                                                                           | [packages/core/src/archive/extract.ts:146](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L146) |
| `id.owner`                               | `string` \| `null` | -                                                                           | [packages/core/src/archive/extract.ts:146](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L146) |
| <a id="path"></a> `path`                 | `string`           | Absolute path to the extension root (directory containing \_extension.yml). | [packages/core/src/archive/extract.ts:142](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L142) |
| <a id="relativepath"></a> `relativePath` | `string`           | Path relative to the extraction root (for display purposes).                | [packages/core/src/archive/extract.ts:144](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L144) |

#### ExtractOptions

Defined in: [packages/core/src/archive/extract.ts:20](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L20)

Options for archive extraction.

##### Properties

| Property                              | Type               | Description                             | Defined in                                                                                                                                                                  |
| ------------------------------------- | ------------------ | --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="maxsize"></a> `maxSize?`       | `number`           | Maximum total extraction size in bytes. | [packages/core/src/archive/extract.ts:22](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L22) |
| <a id="onprogress"></a> `onProgress?` | (`file`) => `void` | Progress callback.                      | [packages/core/src/archive/extract.ts:24](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L24) |

#### ExtractResult

Defined in: [packages/core/src/archive/extract.ts:30](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L30)

Result of archive extraction.

##### Properties

| Property                             | Type                   | Description                       | Defined in                                                                                                                                                                  |
| ------------------------------------ | ---------------------- | --------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="extractdir"></a> `extractDir` | `string`               | Path to the extraction directory. | [packages/core/src/archive/extract.ts:32](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L32) |
| <a id="files"></a> `files`           | `string[]`             | List of extracted file paths.     | [packages/core/src/archive/extract.ts:34](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L34) |
| <a id="format"></a> `format`         | `"zip"` \| `"tarball"` | Detected archive format.          | [packages/core/src/archive/extract.ts:36](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L36) |

### Functions

#### cleanupExtraction()

```{.ts filename="TypeScript"}
function cleanupExtraction(extractDir): Promise<void>;
```

Defined in: [packages/core/src/archive/extract.ts:221](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L221)

Clean up a temporary extraction directory.

##### Parameters

| Parameter    | Type     | Description         |
| ------------ | -------- | ------------------- |
| `extractDir` | `string` | Directory to remove |

##### Returns

`Promise<void>`

#### detectArchiveFormat()

```{.ts filename="TypeScript"}
function detectArchiveFormat(archivePath): "zip" | "tarball" | null;
```

Defined in: [packages/core/src/archive/extract.ts:42](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L42)

Detect archive format from file path.

##### Parameters

| Parameter     | Type     |
| ------------- | -------- |
| `archivePath` | `string` |

##### Returns

`"zip"` \| `"tarball"` \| `null`

#### extractArchive()

```{.ts filename="TypeScript"}
function extractArchive(archivePath, options): Promise<ExtractResult>;
```

Defined in: [packages/core/src/archive/extract.ts:63](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L63)

Extract an archive to a temporary directory.

##### Parameters

| Parameter     | Type                                | Description              |
| ------------- | ----------------------------------- | ------------------------ |
| `archivePath` | `string`                            | Path to the archive file |
| `options`     | [`ExtractOptions`](#extractoptions) | Extraction options       |

##### Returns

```{=html}
<code>Promise&lt;<a href="#extractresult" style="text-decoration-line: underline; text-decoration-style: dashed; text-decoration-thickness: 1px; text-decoration-color: currentColor;">ExtractResult</a>&gt;</code>
```

Extraction result

#### findAllExtensionRoots()

```{.ts filename="TypeScript"}
function findAllExtensionRoots(extractDir): Promise<DiscoveredExtension[]>;
```

Defined in: [packages/core/src/archive/extract.ts:185](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L185)

Find all extension roots in an extracted archive.

Unlike findExtensionRoot which returns the first match, this function
finds all extensions in the archive, useful for repositories that
contain multiple extensions.

##### Parameters

| Parameter    | Type     | Description          |
| ------------ | -------- | -------------------- |
| `extractDir` | `string` | Extraction directory |

##### Returns

`Promise<<code><a href="#discoveredextension" style="text-decoration-line: underline; text-decoration-style: dashed; text-decoration-thickness: 1px; text-decoration-color: currentColor;">DiscoveredExtension</a>[]</code>{=html}>`

Array of discovered extensions

#### findExtensionRoot()

```{.ts filename="TypeScript"}
function findExtensionRoot(extractDir): Promise<string | null>;
```

Defined in: [packages/core/src/archive/extract.ts:103](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/extract.ts#L103)

Find the extension root in an extracted archive.

GitHub archives typically have a top-level directory like "repo-tag/".
This function finds the directory containing \_extension.yml.

##### Parameters

| Parameter    | Type     | Description          |
| ------------ | -------- | -------------------- |
| `extractDir` | `string` | Extraction directory |

##### Returns

`Promise<string | null>`

Path to extension root or null if not found

## TAR.GZ Archive Extraction Module

TAR.GZ archive extraction with security checks.

Includes protection against path traversal and oversized archives.

### Interfaces

#### TarExtractOptions

Defined in: [packages/core/src/archive/tar.ts:21](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/tar.ts#L21)

Options for TAR extraction.

##### Properties

| Property                              | Type               | Description                             | Defined in                                                                                                                                                          |
| ------------------------------------- | ------------------ | --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="maxsize"></a> `maxSize?`       | `number`           | Maximum total extraction size in bytes. | [packages/core/src/archive/tar.ts:23](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/tar.ts#L23) |
| <a id="onprogress"></a> `onProgress?` | (`file`) => `void` | Progress callback.                      | [packages/core/src/archive/tar.ts:25](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/tar.ts#L25) |

### Functions

#### extractTar()

```{.ts filename="TypeScript"}
function extractTar(
   archivePath,
   destDir,
options): Promise<string[]>;
```

Defined in: [packages/core/src/archive/tar.ts:47](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/tar.ts#L47)

Extract a TAR.GZ archive to a directory.

##### Parameters

| Parameter     | Type                                      | Description             |
| ------------- | ----------------------------------------- | ----------------------- |
| `archivePath` | `string`                                  | Path to the TAR.GZ file |
| `destDir`     | `string`                                  | Destination directory   |
| `options`     | [`TarExtractOptions`](#tarextractoptions) | Extraction options      |

##### Returns

`Promise<string[]>`

List of extracted file paths

## ZIP Archive Extraction Module

ZIP archive extraction with security checks.

Includes protection against path traversal and zip bomb attacks.

### Interfaces

#### ZipExtractOptions

Defined in: [packages/core/src/archive/zip.ts:24](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/zip.ts#L24)

Options for ZIP extraction.

##### Properties

| Property                              | Type               | Description                             | Defined in                                                                                                                                                          |
| ------------------------------------- | ------------------ | --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a id="maxsize"></a> `maxSize?`       | `number`           | Maximum total extraction size in bytes. | [packages/core/src/archive/zip.ts:26](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/zip.ts#L26) |
| <a id="onprogress"></a> `onProgress?` | (`file`) => `void` | Progress callback.                      | [packages/core/src/archive/zip.ts:28](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/zip.ts#L28) |

### Functions

#### extractZip()

```{.ts filename="TypeScript"}
function extractZip(
   archivePath,
   destDir,
options): Promise<string[]>;
```

Defined in: [packages/core/src/archive/zip.ts:50](https://github.com/mcanouil/quarto-wizard/blob/fe2d58edd97509722fd34d23ee83654640b039ec/packages/core/src/archive/zip.ts#L50)

Extract a ZIP archive to a directory.

##### Parameters

| Parameter     | Type                                      | Description           |
| ------------- | ----------------------------------------- | --------------------- |
| `archivePath` | `string`                                  | Path to the ZIP file  |
| `destDir`     | `string`                                  | Destination directory |
| `options`     | [`ZipExtractOptions`](#zipextractoptions) | Extraction options    |

##### Returns

`Promise<string[]>`

List of extracted file paths
